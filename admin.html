<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bowling Admin Panel</title>
    <link rel="stylesheet" href="admin_style.css">
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-btn">← Atpakaļ uz rezultātu ekrānu</a>
        <h1>Admin Panel</h1>
        <div class="admin-section">
            <!-- Admin Panel to Add New Screens -->
            <div class="admin-panel">
                <h2>Pievienot jaunu ekrānu</h2>
                <form id="newScreenForm">
                    <label>Nosaukums (Title):</label>
                    <input type="text" id="screenTitle" required><br>

                    <label>Apakšvirsraksts (Subtitle):</label>
                    <input type="text" id="screenSubtitle"><br>

                    <label>Satura HTML:</label><br>
                    <textarea id="screenContent" rows="4" required></textarea><br>

                    <label>Screen ID (unikāls ID, piem. "sponsors"):</label>
                    <input type="text" id="screenId" required><br><br>

                    <button type="submit">💾 Saglabāt ekrānu</button>
                </form>

                <h3>📺 Priekšskatījums</h3>
                <div id="previewContainer" class="screen preview"></div>
            </div>
    </div>
    <script>
        const form = document.getElementById("newScreenForm");
        const preview = document.getElementById("previewContainer");

        const screenStorageKey = "customScreens";

        function createScreenElement(screenData) {
            const screen = document.createElement("div");
            screen.classList.add("screen");
            screen.id = screenData.id;

            screen.innerHTML = `
                <div class="section-header">
                    <h1>${screenData.title}</h1>
                    <div class="subtitle">${screenData.subtitle}</div>
                </div>
                <div class="screen-content">
                    ${screenData.content}
                </div>
            `;
            return screen;
        }

        function updatePreview() {
            const screenData = {
                title: document.getElementById("screenTitle").value,
                subtitle: document.getElementById("screenSubtitle").value,
                content: document.getElementById("screenContent").value,
                id: document.getElementById("screenId").value
            };
            preview.innerHTML = "";
            preview.appendChild(createScreenElement(screenData));
        }

        form.addEventListener("input", updatePreview);

        form.addEventListener("submit", function(e) {
            e.preventDefault();

            const screenData = {
                title: document.getElementById("screenTitle").value,
                subtitle: document.getElementById("screenSubtitle").value,
                content: document.getElementById("screenContent").value,
                id: document.getElementById("screenId").value
            };

            // Save to localStorage
            const savedScreens = JSON.parse(localStorage.getItem(screenStorageKey)) || [];
            savedScreens.push(screenData);
            localStorage.setItem(screenStorageKey, JSON.stringify(savedScreens));

            // Add to DOM
            const newScreen = createScreenElement(screenData);
            document.body.appendChild(newScreen);

            alert("Ekrāns pievienots!");
            form.reset();
            preview.innerHTML = "";
        });

        // Load screens from localStorage on page load
        window.addEventListener("DOMContentLoaded", () => {
            const savedScreens = JSON.parse(localStorage.getItem(screenStorageKey)) || [];
            savedScreens.forEach(screenData => {
                const screen = createScreenElement(screenData);
                document.body.appendChild(screen);
            });
        });
    </script>

</body>
</html> 